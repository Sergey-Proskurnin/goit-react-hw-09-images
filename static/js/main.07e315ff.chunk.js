(this["webpackJsonpgoit-react-hw-09-images"]=this["webpackJsonpgoit-react-hw-09-images"]||[]).push([[0],{10:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__1LAAF",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__-J4lR"}},11:function(e,t,a){e.exports={Overlay:"Modal_Overlay__ZDGnq",Modal:"Modal_Modal__3ifpb"}},22:function(e,t,a){},23:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__3HEMA"}},24:function(e,t,a){e.exports={Button:"Button_Button__3tcBB"}},27:function(e,t,a){e.exports={Loader:"Loader_Loader__3qkQe"}},34:function(e,t,a){},35:function(e,t,a){},5:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__mi2VE",SearchForm:"Searchbar_SearchForm__2XL2-",SearchFormButton:"Searchbar_SearchFormButton__2Q9NG",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__pltun",SearchFormInput:"Searchbar_SearchFormInput__1VQZu"}},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),i=(a(33),a(34),a(7)),u=a(12),s=a(2),l=a(28),m=(a(35),a(22)),b=a.n(m),j=a(1),d=function(e){var t=e.children;return Object(j.jsx)("div",{className:b.a.container,children:t})},h=a(5),O=a.n(h),g=function(e){var t=e.onSetQuery,a=e.searchQuery,n=e.onSubmit;return Object(j.jsx)("header",{className:O.a.Searchbar,children:Object(j.jsxs)("form",{onSubmit:n,className:O.a.SearchForm,children:[Object(j.jsx)("button",{type:"submit",className:O.a.SearchFormButton,children:Object(j.jsx)("span",{className:O.a.SearchFormButtonLabel,children:"Search"})}),Object(j.jsx)("input",{className:O.a.SearchFormInput,onInput:t,name:"searchQuery",value:a,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})},f=a(23),p=a.n(f),_=a(10),x=a.n(_),y=Object(n.createContext)(),I=function(){var e=Object(n.useContext)(y),t=e.images,a=e.onOpenModal;return t.map((function(e){var t=e.id,n=e.webformatURL,r=e.tags,c=e.largeImageURL;return Object(j.jsx)("li",{onClick:a,className:x.a.ImageGalleryItem,children:Object(j.jsx)("img",{src:n,alt:r,"data-source":c,className:x.a.ImageGalleryItemImage})},t)}))},S=function(){return Object(j.jsx)("ul",{className:p.a.ImageGallery,id:"imagesList",children:Object(j.jsx)(I,{})})},v=a(24),L=a.n(v),w=function(e){var t=e.onLoadMore;return Object(j.jsx)("button",{onClick:t,className:L.a.Button,type:"button",children:"Load more"})},M=a(11),F=a.n(M),G=function(e){var t=e.onCloseModal,a=Object(n.useContext)(y),r=a.modalImg,c=a.modalAlt,o=Object(n.useCallback)((function(e){"Escape"===e.key&&t(e)}),[t]);return Object(n.useEffect)((function(){return window.addEventListener("keydown",o),function(){window.removeEventListener("keydown",o)}}),[o]),Object(j.jsx)("div",{onClick:t,className:F.a.Overlay,children:Object(j.jsx)("div",{className:F.a.Modal,children:Object(j.jsx)("img",{src:r,alt:c})})})},N=a(25),B=a.n(N),k=function(e,t){var a=new URLSearchParams({image_type:"photo",orientation:"horizontal",q:e,page:t,per_page:12,key:"21195458-19b2d8fc62244b43de198b4d0"});return B.a.get("".concat("https://pixabay.com/api/","?").concat(a))},C=a(26),Q=a.n(C),A=a(27),E=a.n(A),P=function(){return Object(j.jsx)("div",{className:E.a.Loader,children:Object(j.jsx)(Q.a,{type:"Audio",color:"#00BFFF",height:150,width:150})})},q=function(){var e=Object(n.useState)({images:[],currentPage:1,searchQuery:"",isLoading:!1,error:null,showModal:!1,modalImg:"",modalAlt:""}),t=Object(l.a)(e,2),a=t[0],r=t[1],c=a.searchQuery,o=a.currentPage,m=a.images,b=a.isLoading,h=a.showModal;return Object(j.jsx)(y.Provider,{value:Object(s.a)(Object(s.a)({},a),{},{onOpenModal:function(e){r((function(t){return Object(s.a)(Object(s.a)({},t),{},{modalImg:e.target.dataset.source,showModal:!0,modalAlt:e.target.attributes.alt.textContent})}))}}),children:Object(j.jsxs)(d,{children:[Object(j.jsx)(g,{onSubmit:function(e){e.preventDefault(),r((function(e){return Object(s.a)(Object(s.a)({},e),{},{isLoading:!0})})),k(c,1).then((function(e){return r((function(t){return Object(s.a)(Object(s.a)({},t),{},{images:e.data.hits})}))})).catch((function(e){return r((function(t){return Object(s.a)(Object(s.a)({},t),{},{error:e})}))})).finally((function(){return r((function(e){return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1})}))}))},onSetQuery:function(e){r((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(i.a)({},e.target.name,e.target.value))}))},searchQuery:c}),Object(j.jsx)(S,{}),b&&Object(j.jsx)(P,{}),m.length>11&&Object(j.jsx)(w,{onLoadMore:function(){r((function(e){return Object(s.a)(Object(s.a)({},e),{},{isLoading:!0})})),k(c,o+1).then((function(e){return r((function(t){return Object(s.a)(Object(s.a)({},t),{},{images:[].concat(Object(u.a)(t.images),Object(u.a)(e.data.hits)),currentPage:t.currentPage+1})}))})).catch((function(e){return r((function(t){return Object(s.a)(Object(s.a)({},t),{},{error:e})}))})).finally((function(){r((function(e){return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1})})),window.scrollTo({top:document.querySelector("#imagesList").scrollHeight,behavior:"smooth"})}))}}),h&&Object(j.jsx)(G,{onCloseModal:function(e){"IMG"!==e.target.nodeName&&r((function(e){return Object(s.a)(Object(s.a)({},e),{},{showModal:!1,modalImg:"",modalAlt:""})})),document.body.classList.remove("is-open")}})]})})};o.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(q,{})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.07e315ff.chunk.js.map